# SQL
---
## 윈도우 함수 (WINDOW FUNCTION)
```
행과 행 간의 관계를 쉽게 정의하기 위해 만든 함수
```
윈도우 함수는 기존에 사용하더 집계 함수도 있고, 새로이 윈도우 함수 전용으로 만들어진 기능도 있다
다른 함수와 달리 `중천해서 사용은 못하지만`, 서브쿼리에는 사용할 수 있다

---
### 종류
> 벤더별로 지원하는 함수 차이가 있다

1. 그룹 내 `순위(RANK) 관련`함수
2. 그룹 내 `집계(AGGREGATE) 관련` 함수
3. 그룹 내 `행 순서 관련` 함수
4. 그룹 내 `비율 관련` 함수
5. 선형 분석을 포함한 `통계 분석 함수`

---
### 문법
윈도우 함수에는 `OVER`문구가 키워드로 필수 포함된다
```sql
SELECT WINDOW_FUNCTION (ARGUMENTS) OVER
    ([PARITION BY 컬럼] [ORDER BY 컬럼] [WINDOWING 절] )
FROM 테이블 명;
```
- WINDOW_FUNCTION : 윈도우 함수

- ARCUMENTS(인수) : 함수에 따라 0 ~ N개 인수가 지정될 수 있다
- PARTITION BY 절: 전체 집합을 기준에 의해 소그룹으로 나눌 수 있다
- ORDER BY 절 : 어떤 항목에 대해 순위를 지정할 지 order by 절을 기술한다
- WINDOWING 절 : WINDOWING 절은 함수의 대상이 되는 행 기준의 범위를 강력하게 지정할 수 있다
    > sql server 에서는 지원하지 않는다

---
### 그룹 내 순위관련 함수
1. `RANK`
    ```
    순위를 구하는 함수
    ``` 
    - 특정 범위(PARTITION) 내에서 순위를 구할 수도 있고, 전체 데이터에 대한 순위를 구할 수도 있다
    - 동일한 값에 대해서는 `동일한 순위를 부여`하게 된다

2. `DENSE_RANK`
    ```
    누적 순위
    ```
    - `동일한 순위를 하나의 건수로 취급`한다

3. `ROW_NUMBER`
    ```
    연속된 행 번호
    ```
    - 동일한 값이라도 `고유한 순위을 부여`한다

![alt text](image-1.png)

---
