# 운영체제
---
## 운영체제
---
### 커널
```
운영체제의 핵심 기능을 담당하는 부분
```
운영체제가 설치된 모든 기기에는 커널이 있다
어떤 커널을 사용하는지에 따라 여러분이 실행하고 개발하는 프로그램이 하드웨어를 이용하는 양상이 달라지고, 결과적으로 컴퓨터 전체의 성능도 달라질 수 있다

![](https://hongong.hanbit.co.kr/wp-content/uploads/2022/09/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%95%B5%EC%8B%AC-%EA%B8%B0%EB%8A%A5_%EC%BB%A4%EB%84%90.png)

운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스도 있는데, 대표적으로 사용자 인터페이스가 있다
`사용자 인터페이스`는 윈도우의 바탕화면과 같이 사용자가 컴퓨터와 상호작용할 수 있는 통로이다

운영체제가 제공하는 사용자 인터페이스의 종류에는 `그래픽 유저 인터페이스`와 `커맨드 라인 인터페이스`가 있다
그래픽 유저 인터페이스는 윈도우 바탕화면이나 스마트폰의 화면처럼 `그래픽을 기반`으로 컴퓨터와 상호작용할 수 있는 인터페이스이고, 커맨드 라인 인터페이스는 `명령어를 기반`으로 컴퓨터와 상호작용할 수 있는 인터페이스이다

이러한 사용자 인터페이스는 운영체제가 제공하는 서비스이지만, 이는 그저 컴퓨터와 상호작용하기 위한 통로일 뿐 커널에 속한 기능은 아니다

---
### 이중 모드와 시스템 호출
운영체제는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호한다
만약 응용 프로그램이 CPU, 메모리, 하드디스크 등에 마음대로 접근하고 조작할 수 있다면 `자원이 무질서하게 관리`될 것이고, 응용 프로그램이 조금만 실수해도 컴퓨터 전체에 큰 악영향을 끼칠 수 있다

그래서 운영체제는 응용 프로그램들이 자원에 접근하려고 할 때 오직 자신을 통해서만 접근하도록하여 자원을 보호한다
응용 프로그램이 자원에 접근하기 위해서는 운영체제에 도움을 요청해야한다
이때 운영체제에 도움을 요청한다는 말은 `운영체제 코드를 실행하려고 한다`는 말과 같다
응용 프로그램의 요청을 받은 운영체제는 응용 프로그램 대신 자원에 접근하여 요청한 작업을 수행한다

![](https://hongong.hanbit.co.kr/wp-content/uploads/2022/09/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%9D%B4%EC%A4%91%EB%AA%A8%EB%93%9C.png)

이러한 운영체제의 역할은 이중모드로써 구현된다
`이중모드`란 CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식이다
CPU는 명령어를 사용자모드로써 실행할 수 있고, 커널 모드로써 실행할 수 있다

`사용자 모드`는 운영체제 서비스를 제공받을 수 없는 실행 모드이다
즉, 커널 영역의 코드를 실행할 수 있는 모드이다
`커널 모드`는 운영체제 서비스를 제공받을 수 있는 실행 모드이다
즉, 커널 영역의 코드를 실행할 수 있는 모드이다

사용자모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청을 보내 커널 모드로 전환되어야 한다
이때 운영체제 서비스를 제공받기 위한 요청을 `시스템 호출(시스템 콜)`이라고 한다
사용자 모드로 실행되는 프로그램은 시스템 호출을 통해 커널 모드로 전환하여 운영체제 서비스를 제공받을 수 있다

![](https://hongong.hanbit.co.kr/wp-content/uploads/2022/09/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%ED%98%B8%EC%B6%9C.png)

시스템 호출은 일종의 인터럽트이다 
정확히는 소프트웨어적인 인터럽트이다
인터럽트는 입출력장치에 의해 발생하기도 하지만 인터럽트를 발생시키는 특정 명령어에의해 발생하기도 하는데 이를 `소프트웨어 인터럽트`라고 한다

---
### 운영체제의 핵심 서비스
#### 프로세스 관리
실행중인 프로그램을 `프로세스`라고한다
컴퓨터를 사용하는 동안 메모리 안에서는 새로운 프로게스들이 마구 생성되고, 사용되지 않는 프로세스는 메모리에서 삭제된다

일반적으로 하나의 CPU는 한 번에 하나의 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복한다

이때 각 프로세스 마다 사용하고자하는 자원도 다양하다
그렇기에 운영체제는 다양한 프로세스를 일목요연하게 관리하고 실행할 수 있어야 한다
여러 프로세스가 동시에 실행되는 환경에서는 `프로세스 동기화`가 필수적이고, 프로세스가 꼼짝도 못하고 더 이상 실행되지 못하는 상황인 `교착상태`를 해결해야 한다

#### 자원 접근 및 할당
모든 프로세스는 실행을 위해 자원을 필요로 한다
그리고 운영체제는 프로세스들이 사용할 자원에 접근하고 조작함으로써 프로세스에 필요한 자원을 할당해준다

- CPU   
운영체제는 프로세스들에 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 CPU를 이용하게 할지를 결정할 수 있어야한다
이를 `CPU 스케줄링`이라고 한다

- 메모리    
메모리에 적재된 프로세스들은 크기도, 적재되는 주소도 가지각색이다
같은 프로세스라 할지라도 실행될때마다 적재되는 주소가 달라질 수 있다
때로는 메모리가 이미 꽉 차 있어 실행해야 할 프로세스를 적재할 공간이 없는 경우도 있고, 메모리에 공간이 남았는데도 불구하고 프로세스를 적재하지 못하는 상화동 발생한다
그래서 운영체제는 `새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정`해야한다

- 입출력 장치   
`인터럽트 서비스 루틴`은 운영체제가 제공하는 기능으로 커널 영역에 있다
입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행한다
운영체제는 인터럽트를 처리하는 프로그램, 즉 인터럽트 서비스 루틴을 제공함으로써 입출력 작업을 수행한다

#### 파일 시스템 관리
파일들을 한데 묶어 디렉토리(폴더)로 관리하는 `파일 시스템`도 운영체제가 지원하는 핵심 서비스이다