# 컴퓨터 구조
---
## 메모리
---
### 저장 장치 계층 구조
```
각기 다른 용량과 성능의 저장 장치들을 계층화하여 표현한 구조
```
사용자들은 빠르고 동시에 용량이 큰 저장 장치를 원한다
하지만 `빠른 저장 장치`와 `용량이 큰 저장 장치`는 양립하기 어렵다

낮은 가격대의 대용량 저장 장치를 원한다면 느린 속도는 감수해야 하고, 빠른 메모리를 원하면 작은 용량과 비싼 가격은 잠수해야 한다
이렇게 저장 장치들의 장단점이 명확하다
그래서 일반적으로 컴퓨터는 다양한 저장 장치를 모두 사용하게 된다

컴퓨터가 사용하는 저장장치들은 `CPU에 얼마나 가까운가`를 기준으로 계층적으로 나타낼 수 있다
이를 `저장 장치 계층 구조`라고 한다

![](https://velog.velcdn.com/images%2Fyu-jin-song%2Fpost%2Ff9c8088c-0fec-4dad-ac95-ddf3601aa1d4%2F%EB%A9%94%EB%AA%A8%EB%A6%AC_%EA%B3%84%EC%B8%B5_%EA%B5%AC%EC%A1%B0.png)

위 계층으로 올라갈수록 CPU와 가깝고 용량은 작지만 빠른 장치이다
그리고 아래 계층으로 내려갈 수록 CPU와 멀고 용량은 크지만 느린 저장 장치이다
가격 또한 일반적으로 위 계층으로 올라갈수록 비싸고, 아래 계층으로 내려갈수록 저렴하다

---
### 캐시 메모리
```
CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장 장치
```
캐시 메모리는 CPU의 연산 속도와 메모리 접근 속도의 차이를 조금이나마 줄이기 위해 탄생했다
메모리에서 CPU가 사용할 일부 데이터를 미리 캐시 메모리로 가지고 와서 활용한다

컴퓨터 내부에는 여러 개의 캐시 메모리가 있다
이 캐시 메모리들은 CPU(코어)와 가까운 순서대로 계층을 구성한다
코어와 가장 가까운 캐시 메모리를 `L1 캐시`, 그다음 `L2 캐시` 그다음 가까운 캐시 메모리를 `L3 캐시`라고 부른다

![](https://velog.velcdn.com/images/sukk/post/6f5d9e4a-eb5f-4968-8f76-d9b793cb301e/image.png)
> 일반적으로 L1 캐시와 L2 캐시는 코어 내부에, L3 캐시는 코어 외부에 위치해 있다

저장 장치 계층 구조를 이해한다면 짐작할 수 있다시피 캐시 메모리의 용량은 L1, L2, L3순으로 커지고, 속도는 L3, L2, L1 순으로 빨라진다
CPU가 메모리 내에 데이터가 필요하다고 판단하면 우선 L1 캐시에 해당 데이터가 있는지를 알아보고 없다면 L2 L3 캐시 순으로 데이터를 검색한다

멀티 코어 프로세서에서 L1-L2-L3 캐시는 일반적으로 다음과 같이 구현된다
L1 캐시와 L2 캐시는 코어마다 고유한 캐시 메모리로 할당되고, L3 개시는 여러 코어가 공유하는 형태로 사용된다

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F17V2x%2Fbtsoyp3bBXh%2FKuTGnOUy53MW6TW1NVu3EK%2Fimg.png)

---