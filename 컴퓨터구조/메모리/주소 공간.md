# 컴퓨터 구조
---
## 메모리
---
### 주소 공간
주소에는 두 종류가 있다
`메모리 하드웨어가 사용`하는 물리주소와 `CPU와 실행 중인 프로그램이 사용`하는 논리주소로 나뉜다

---
### 물리 주소 / 논리 주소
메모리가 사용하는 `물리 주소`는 말 그대로 정보가 실제로 저장된 하드웨어상의 주소를 의미한다

반면 CPU와 실행 중인 프로그램이 사용하는 `논리 주소`는 실행 중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소를 의미한다

CPU가 이해하는 주소가 논리 주소라고 해도 CPU가 메모리와 상호작용하려면 논리 주소와 물리 주소 간의 변환이 이루어져야 한다
두 주소 간에 어떠한 변환도 이루어지지 않는다면 CPU와 메모리는 서로 이해할 수 없는 주소 체계를 가지고 상호작용을 할 수 없게 된다

논리 주소와 물리 주소 간의 변환은 CPU와 주소 버스 사이에 위치한 `메모리 관리 장치(MMU)`라는 하드웨어에 의해 수행된다
MMU는 CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여 논리 주소를 물리 주소로 변환한다

![](https://velog.velcdn.com/images/khs0415p/post/c4a8068a-3f48-4ec6-b06c-4f1102806a16/image.png)

`베이스 레지스터`는 프로그램의 가장 작은 물리주소, 즉 프로그램의 첫 물리 주소를 저장하는 셈이고, `논리 주소`는 프로그램의 시작점으로부터 떨어진 거리인 셈이다

---
### 메모리 보호 기법
다른 프로그램의 영역을 침법할 수 있는 명령어는 위험하기 때문에 논리 주소 범위를 벗어나는 명령어 실행을 방지하고 실행 중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호할 방법이 필요하다
이는 `한계 레지스터`라는 레지스터가 담당한다

베이스 레지스터가 실행 중인 프로그램의 가장 작은 물리 주소를 저장한다면, 한계 레지스터는 `논리 주소의 최대 크기`를 저장한다
즉, 프로그램의 물리 주소 범위는 `베이스 레지스터 값 이상, 베이스레지스터 값 + 한계 레지스터 값 미만`이 된다

![](https://velog.velcdn.com/images/ncookie/post/efe37d3f-8ac6-4777-9a75-a8ee7cf47ad4/image.png)

CPU가 접근하려는 논리 주소는 한계 레지스터가 저장한 값보다 커서는 안된다
한계 레지스터보다 높은 주소 값에 접근하는 것은 곧 프로그램의 범위에 벗어난 메모리 공간에 접근하는 것과 같기 때문이다

CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 한계 레지스터보다 작은지 항상 검사한다
만약 한계 레지스터 보다 높은 논리 주소에 접근하려고 하면 `인터럽트(트랩)`를 발생시켜 실행을 중단한다

![](https://velog.velcdn.com/images/localgaji/post/00343998-1c80-45fe-a071-85a8300ae54e/image.png)

이러한 방식으로 실행 중인 프로그램의 독집적인 실행 공간을 확보하고 하나의 프로그램이 다른 프로그램을 침범하지 못하게 보호할 수 있다