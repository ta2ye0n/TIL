# 컴퓨터구조
---
## 입출력장치
---
### 장치 컨트롤러
입출력장치는 CPU, 메모리보다 다루기 더 까다롭다
크게 두 가지 이유가있다

1. `입출력장치에는 종류가 너무나도 많다`   
장치가 다양하면 장치마다 속도, 데이터 전송 형식 등도 다양하다
따라서 입출력장치와 정보를 주고받는 방식을 규격화하기 어렵다

2. `일반적으로 CPU와 메모리의 데이터 전송률은 높지만 입출력장치의 데이터 전송률은 낮다`   
여기서 `전송률`이란 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표이다

이와 같은 이유로 입출력장치는 컴퓨터에 직접 연결되지 않고 `장치 컨트롤러`라는 하드웨어를 통해 연결된다
> 장치 컨트롤러는 `입출력 제어기, 입출력 모듈`등으로 다양하게 불린다

장치 컨트롤러는 대표적으로 다음과 같은 역할을 통해 문제들을 해결한다
- CPU와 입출력장치 간의 통신 중개
- 오류 검출
- 데이터 버퍼링

입출력장치 종류가 많아 정보 규격화가 어려웠던 문제는 장치 컨트롤러가 일종의 번역가 역할을 함으로써 해결할 수도 있다
그 과정에서 장치 컨트롤러는 자신과 연결된 입출력장치에 문제는 없는지 오류를 검출하기도 한다

장치 컨트롤러의 세 번째 기능인 `데이터 버퍼링`은 무엇일까
`버퍼링`이란 전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 `버퍼`라는 임시 저장 공간에 저장하여 전송률을 비슷하게 맞추는 방법이다

즉, 장치 컨트롤러는 일반적으로 전송률이 높은 CPU와 일반적으로 전송률이 낮은 입출력장치와의 전송률 차이를 데이터 버퍼링으로 완화한다

#### 장치 컨트롤러 내부 구조
![](https://velog.velcdn.com/images/doxxx93/post/42b0ddc4-dc7d-4ca4-a423-39406fd190da/image.png)   
실제로는 이보다 복잡하지만 기억해야할 것은 `데이터 레지스터`와 `상태 레지스터`, `제어 레지스터` 세가지 이다
> 상태 레지스터와 제어 레지스터는 하나의 레지스터(상태/제어 레지스터)로 사용되기도 한다

- `데이터 레지스터`   
CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터(버퍼 역할)   
최근 주고받는 데이터가 많은 입출력장치에서는 레지스터 대신 RAM을 사용하기도 한다

- `상태 레지스터`   
입출력장치 작업 준비 여부, 작업 완료, 오류 유무 등의 상태 정보 저장

- `제어 레지스터`   
입출력장치가 수행할 내용에 대한 제어 정보와 명령 저장

이 레지스터들에 담긴 값은 버스를 타고 CPU나 다른 입출력장치로 전달되기도 하고, 장치 컨트롤러에 연결된 입출력장치로 전달된다

---
### 장치 드라이버
```
장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램
```
장치 컨트롤러가 입출력장치를 연결하기 위한 하드웨어적인 통로라면, 장치 드라이버는 입출력장치를 연결하기 위한 `소프트웨어적인 통로`이다

![](https://velog.velcdn.com/images/t990421/post/51663d0d-a30a-404a-9514-8131922f4d62/image.png)